# 테인트(taints)와 톨러레이션(tolerations)
## 정의
- 테인트는 노드의 관점에서 "특정(톨러레이션이 적용된) 파드만 여기에 배포해라!"라는 목적으로, 톨러레이션이 적용된 파드는 테인트가 적용되지 않은 노드로 배포될 가능성 존재
- 노드 어피니티는 파드의 관점에서 "특정(노드 어피니티 조건에 부합하는) 노드로만 배포돼라!"라는 목적으로, 노드 어피니티가 적용되지 않은 파드가 노드 어피니티 조건에 부합하는 노드로 배포될 가능성 존재
- 따라서 테인트/톨러레이션과 노드 어피니티를 복합적으로 적용할 경우 __특정 노드에는 특정 파드만 배포 가능하고, 특정 파드는 특정 노드로만 배포되도록 스케줄링 가능__

## 동작
- 테인트와 톨러레이션은 관계를 정의하는 것에 따라 배포를 유연하게 만들 수 있다.
- __테인트__ : 키와 값, 그리고 키와 값에 따른 효과의 조합을 통해 테인트를 설정한 노드에 파드 배치의 기준을 설정한다.
- __톨러레이션__ : 테인트와 마찬가지로 키, 값, 효과를 가지고 있으며 여기에 추가로 연산자를 가지고 있다.

### 테인트
- 키와 값의 조합은 테인트를 설정한 노드가 어떤 노드인지를 구분하기 위해 사용한다.
- 효과는 테인트와 톨러레이션의 요소인 키 또는 값이 일치하지 않는 파드가 노드에 스케줄되려는 경우 어떤 동작을 할 것인지 나타낸다.
|효과|테인트가 설정된 노드에 파드 신규 배치|파드가 배치된 노드에 테인트 설정|
|--|-----|-----|
|NoSchedule|노드에 파드 배치 거부|노드에 존재하는 파드 유지|
|PreferNoSchedule|다른 노드에 파드 배치가 불가능할 때는 노드에 파드 배치|노드에 존재하는 파드 유지|
|NoExecute|노드에 파드 배치 거부|파드를 노드에서 제거|

### 톨러레이션
- 테인트가 설정된 노드로 들어가기 위한 특별한 열쇠의 역할을 하며, 키와 효과가 반드시 일치해야 한다.
- 이 때, 톨러레이션에서만 정의되는 연산자는 기본적으로 Equal로 동작해 테인트와 톨러레이션을 비교하는 역할을 한다.
- Exist의 경우 비교할 키와 값이 존재한다는 가정으로 테인트로 진입할 수 있는 만능 키로 바꿔주는 역할을 한다.

